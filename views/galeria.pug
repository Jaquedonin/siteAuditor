extends layout.pug
block content
    main#galeria.d-flex.flex-column.align-content-stretch
        header#mapa-header
            nav.navbar.navbar-expand-lg.navbar-dark.navbar-fixed-top
                .container
                    a.navbar-brand.col-4(href='#page-top') MAPA DE  CONTROLE SOCIAL
                    #logo.navbar-brand.col-4
                        img(src="/images/logo_tce.png")
                        span Tribunal de Contas do <br/> Estado da Paraíba
                    button.navbar-toggler.collapsed(type='button', data-toggle='collapse', data-target='#navbar', aria-expanded='false', aria-controls='navbar', aria-label='Toggle navigation')
                        span.sr-only Toggle navigation
                        span.navbar-toggler-icon
                    #navbar.col-4.collapse.navbar-collapse
                        ul.navbar-nav.ml-auto
                            li.nav-item
                                a.nav-link Como participar
                            li.nav-item#login
                                if user
                                    a.nav-link(href="/dashboard") 
                                        span Gerenciador
                                else
                                    a.nav-link(href='/auth') Login
                            li.nav-item
                                a.nav-link Sobre
        nav.navbar.navbar-expand-lg#galeria-navbar 
            a#voltar-galeria(href="/")
                i.fas.fa-arrow-left
            #miniatura
                include mapa.pug
                p=cidade.nome
                script.
                    $("##{cidade.codigo}").attr("class", "selected")
            div.col
                div.row
                    .col
                       input#select-escola(type='text' name='escola' placeholder="Pesquisar escolas" value=escola.nome).form-control.form-control-sm
                    .col
                        .input-group
                            input.form-control#pesquisar(placeholder="Pesquisar")
                            .input-group-append
                                i.input-group-text.fas.fa-search
                div.row
                    if categorias
                        ul.navbar-nav
                            li(class= categoria.destaque ? "nav-item selected" : "nav-item")
                                a.nav-link(href="destaques")="destaques"
                            each cat in categorias
                                li(class= cat.selected ? "nav-item selected" : "nav-item")
                                    a.nav-link(href=cat.descricao)=cat.descricao
        #categoria.row
            if categoria && categoria.videos && categoria.videos.length > 0
                - var destaque = true;
                    each video in categoria.videos
                        - var thumb = video.thumb ? video.thumb : "https://image.shutterstock.com/z/stock-photo-beautiful-joyful-african-american-teenager-girl-holding-smart-phone-photo-camera-with-hands-taking-662752159.jpg"
                        - var title = video.titulo ? video.titulo : "Título do vídeo"
                        - var description = video.descricao ? video.descricao : "Descrição do vídeo"
                        - var author = video.autor ? video.autor : "Autor do vídeo"

                        if destaque
                            div(id=categoria.nome).destaque.col-12
                                .video.row(onclick="visualizarVideo("+video.id+")")
                                    .preview.col-6(style="background-image: url("+thumb+")")
                                        i.fa.fa-play
                                    .info.col-6
                                        .autor=author
                                        .titulo
                                            b=title
                                        .descr=description
                            - destaque = false                        
                        else
                            .video.col-4(onclick="visualizarVideo("+video.id+")")
                                .row(onclick="visualizarVideo("+video.id+")")
                                    .preview.col-6(style="background-image: url("+thumb+")")
                                        i.fa.fa-play
                                    .info.col-6
                                        .autor=author
                                        .titulo
                                            b=title.substring(0,30)
                                        .descr=description.substring(0,80)
block modal
    #visualizar-video.modal(tabindex='-1', role='dialog')
    script(type='text/javascript', src='/javascripts/galeria.js')

